<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Qo::PatternMatchers::PatternMatch
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Qo::PatternMatchers::PatternMatch";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Qo.html" title="Qo (module)">Qo</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../PatternMatchers.html" title="Qo::PatternMatchers (module)">PatternMatchers</a></span></span>
     &raquo; 
    <span class="title">PatternMatch</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Qo::PatternMatchers::PatternMatch
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Qo::PatternMatchers::PatternMatch</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Branching.html" title="Qo::PatternMatchers::Branching (module)">Branching</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/qo/pattern_matchers/pattern_match.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Classic Pattern Match. This matcher uses <code>when</code> and <code>else</code> branches and
is meant to be a more powerful variant of the case statement</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>baweaver</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ResultPatternMatch.html" title="Qo::PatternMatchers::ResultPatternMatch (class)">ResultPatternMatch</a></span></p>
</div>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">.<strong>create</strong>(branches: [])  &#x21d2; Class </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Allows for the creation of an anonymous PatternMatcher based on this parent class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mixin-class_method" title="mixin (class method)">.<strong>mixin</strong>(destructure: false, as: :match)  &#x21d2; Module </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Allows for the injection of a pattern matching function into a type class for direct access, rather than yielding an instance of that class to a pattern matcher.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(value)  &#x21d2; Any<sup>?</sup> </a>
    

    
      (also: #===, #[])
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Calls the pattern matcher, yielding the target value to the first matching branch it encounters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(destructure: false) {|_self| ... } &#x21d2; Qo::PatternMatchers::PatternMatch </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new instance of a pattern matcher.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_proc-instance_method" title="#to_proc (instance method)">#<strong>to_proc</strong>  &#x21d2; Proc[Any] =&gt; Any </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Procified version of <code>call</code>.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Branching.html" title="Qo::PatternMatchers::Branching (module)">Branching</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Branching.html#included-class_method" title="Qo::PatternMatchers::Branching.included (method)">included</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(destructure: false) {|_self| ... } &#x21d2; <tt><span class='object_link'><a href="" title="Qo::PatternMatchers::PatternMatch (class)">Qo::PatternMatchers::PatternMatch</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new instance of a pattern matcher</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>destructure:</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>false [Boolean]
Whether or not to destructure values before yielding to a block</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>&amp;fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Function to be used to construct the pattern matcher&#39;s branches</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>_self</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>_self</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Qo::PatternMatchers::PatternMatch (class)">Qo::PatternMatchers::PatternMatch</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the object that the method was called on</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qo/pattern_matchers/pattern_match.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>destructure:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_fn'>fn</span><span class='rparen'>)</span>
  <span class='ivar'>@matchers</span>    <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@default</span>     <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@destructure</span> <span class='op'>=</span> <span class='id identifier rubyid_destructure'>destructure</span>

  <span class='kw'>yield</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-class_method">
  
    .<strong>create</strong>(branches: [])  &#x21d2; <tt>Class</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Allows for the creation of an anonymous PatternMatcher based on this
parent class. To be used by people wishing to make their own pattern
matchers with variant branches and other features not included in the
defaultly provided ones</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>branches:</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>[] [Array[Branch]]
Branches to be used with this new pattern matcher</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Anonymous pattern matcher class to be bound to a constant or used
anonymously.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qo/pattern_matchers/pattern_match.rb', line 44</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>branches:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Qo.html" title="Qo (module)">Qo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../PatternMatchers.html" title="Qo::PatternMatchers (module)">PatternMatchers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Qo::PatternMatchers::PatternMatch (class)">PatternMatch</a></span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_branches'>branches</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_branch'>branch</span><span class='op'>|</span> <span class='id identifier rubyid_register_branch'>register_branch</span><span class='lparen'>(</span><span class='id identifier rubyid_branch'>branch</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mixin-class_method">
  
    .<strong>mixin</strong>(destructure: false, as: :match)  &#x21d2; <tt>Module</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Allows for the injection of a pattern matching function into a type class
for direct access, rather than yielding an instance of that class to a
pattern matcher.</p>

<p>This is typically done for monadic types that need to <code>match</code>. When
combined with extractor type branches it can be very handy for dealing
with container types.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
```ruby
# Technically Some and None don&#39;t exist yet, so we have to &quot;cheat&quot; instead
# of just saying `Some` for the precondition
SomeBranch = Qo.create_branch(
  name:        &#39;some&#39;,
  precondition: -&gt; v { v.is_a?(Some) },
  extractor:    :value
)

NoneBranch = Qo.create_branch(
  name:        &#39;none&#39;,
  precondition: -&gt; v { v.is_a?(None) },
  extractor:    :value
)

SomePatternMatch = Qo.create_pattern_match(branches: [SomeBranch, NoneBranch])

class Some
  include SomePatternMatch.mixin

  attr_reader :value

  def initialize(value) @value = value end

  def fmap(&amp;fn)
    new_value = fn.call(value)
    new_value ? Some.new(new_value) : None(value)
  end
end

class None
  include SomePatternMatch.mixin

  attr_reader :value

  def initialize(value) @value = value end
  def fmap(&amp;fn) None.new(value) end
end

Some.new(1)
  .fmap { |v| v * 2 }
  .match { |m|
    m.some { |v| v + 100 }
    m.none { &quot;OHNO!&quot; }
  }
=&gt; 102

Some.new(1)
  .fmap { |v| nil }
  .match { |m|
    m.some { |v| v + 100 }
    m.none { &quot;OHNO!&quot; }
  }
=&gt; &quot;OHNO!&quot;
```</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>destructure:</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>false [Boolean]
Whether or not to destructure values before yielding to a block</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>as:</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>:match</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>:match [Symbol]
Name to use as a method name bound to the including class</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Module</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Module to be mixed into a class</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qo/pattern_matchers/pattern_match.rb', line 124</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_mixin'>mixin</span><span class='lparen'>(</span><span class='label'>destructure:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='symbol'>:match</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_create_self'>create_self</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span> <span class='op'>&amp;</span><span class='id identifier rubyid_function'>function</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>destructure:</span> <span class='id identifier rubyid_destructure'>destructure</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_function'>function</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='const'>Module</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_as'>as</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='op'>&amp;</span><span class='id identifier rubyid_function'>function</span><span class='op'>|</span>
      <span class='id identifier rubyid_create_self'>create_self</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_function'>function</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="call-instance_method">
  
    #<strong>call</strong>(value)  &#x21d2; <tt>Any</tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='===-instance_method'>===</span>, <span id='[]-instance_method'>[]</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Calls the pattern matcher, yielding the target value to the first
matching branch it encounters.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value to match against</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Result of the called branch</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns nil if no branch is matched</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qo/pattern_matchers/pattern_match.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@matchers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_matcher'>matcher</span><span class='op'>|</span>
    <span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_return_value'>return_value</span> <span class='op'>=</span> <span class='id identifier rubyid_matcher'>matcher</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_return_value'>return_value</span> <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@default</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_return_value'>return_value</span> <span class='op'>=</span> <span class='ivar'>@default</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_return_value'>return_value</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_proc-instance_method">
  
    #<strong>to_proc</strong>  &#x21d2; <tt>Proc[Any] =&gt; Any</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Procified version of <code>call</code></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc[Any] =&gt; Any</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qo/pattern_matchers/pattern_match.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_proc'>to_proc</span>
  <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_target'>target</span> <span class='tlambeg'>{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_target'>target</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 18 01:59:30 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.6.1).
</div>

    </div>
  </body>
</html>